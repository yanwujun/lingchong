# 如何更新项目文档

**文档版本**：v1.0  
**适用于**：开发者和维护者

---

## 📌 核心原则

### 活文档理念
本项目采用**活文档**（Living Documentation）理念：
- ✅ 文档随代码同步更新
- ✅ 每次功能开发都更新文档
- ✅ 文档即需求，需求即文档
- ✅ 通过文档了解项目的真实状态

---

## 📖 主要文档及其维护

### 1. 需求实现文档.md ⭐ 最重要

**文件**：`docs/需求实现文档.md`

**性质**：**活文档**，需要持续更新

**何时更新**：
- ✅ 实现新功能后
- ✅ 优化现有功能后
- ✅ 修复Bug后
- ✅ 配置项变更后
- ✅ 数据库结构变更后

**如何更新**：

#### 场景1：实现新功能

**步骤**：

1. **开发前**：在对应章节添加需求
```markdown
### X.X 新功能名称 🚧 [v0.3.0]

**需求**：功能描述...

**状态**：🚧 开发中
```

2. **开发中**：保持状态为 🚧

3. **开发后**：更新为完成状态
```markdown
### X.X 新功能名称 ✅ [v0.3.0]

**需求**：功能描述...

**实现细节**：
文件：src/xxx.py
代码：
```python
def new_function():
    # 实现代码
```

**技术栈**：
- PyQt5.xxx
- ...

**配置项**：
- [Section] → key

**状态**：✅ 完全实现
```

4. **更新统计**：修改文档末尾的统计数据

---

#### 场景2：优化现有功能

**步骤**：

1. 找到对应的功能章节

2. 在标题后添加优化标记
```markdown
### X.X 功能名称 ✅ [v0.1.0] + 优化 ✅ [v0.3.0]
```

3. 在实现细节中添加优化说明
```markdown
**[v0.1.0] 基础实现**：
原有实现...

**[v0.3.0] 优化改进**：
- 优化1：...
- 优化2：...

代码：
```python
# 优化后的代码
```
```

---

#### 场景3：修复Bug

**步骤**：

1. 在对应功能章节更新

2. 添加Bug修复说明
```markdown
**[v0.X.X] Bug修复**：
- 问题：...
- 原因：...
- 解决：...
```

3. 在 CHANGELOG.md 记录

---

#### 场景4：添加配置项

**步骤**：

1. 在功能章节的"配置项"部分添加

2. 在"第7章 配置管理"中添加详细说明

3. 更新 config.ini 示例

---

### 2. CHANGELOG.md

**文件**：`docs/CHANGELOG.md`

**何时更新**：每次发布新版本

**如何更新**：

```markdown
## vX.X.X (YYYY-MM-DD) - 版本名称

### 🎉 新增功能
- ✨ 功能1 - 描述
- ✨ 功能2 - 描述

### 🔧 优化改进
- 🔧 优化1 - 描述
- 🔧 优化2 - 描述

### 🐛 Bug修复
- 🐛 修复1 - 描述
- 🐛 修复2 - 描述

### 📚 文档更新
- 📄 更新1 - 描述
```

---

### 3. README.md（根目录）

**文件**：`README.md`

**何时更新**：
- 项目基本信息变更
- 主要功能变更
- 版本号更新

**如何更新**：
- 更新版本号
- 更新功能特性列表
- 更新快速开始步骤

---

### 4. 项目报告文档

**性质**：版本归档文档，一般不更新

**文件**：
- MVP完成总结.md（v0.1.0归档）
- 优化完成报告.md（v0.2.0归档）
- 全部优化完成.md（v0.2.0归档）

**用途**：保留历史记录，供参考对比

---

## 🔄 更新工作流

### 开发新功能的完整流程

```
1. 需求分析
   └─→ 在 docs/需求实现文档.md 添加需求，标记 🚧

2. 设计实现
   └─→ 编写代码，添加注释

3. 单元测试
   └─→ 编写测试用例

4. 功能完成
   └─→ 更新 docs/需求实现文档.md，标记 ✅ [vX.X.X]
   └─→ 添加实现细节和代码示例

5. 版本发布
   └─→ 更新 docs/CHANGELOG.md
   └─→ 更新所有文件的版本号
   └─→ 创建版本报告（可选）
```

---

## 📝 文档模板

### 新功能模板

```markdown
### X.X 功能名称 ✅ [vX.X.X]

**需求**：
功能的具体需求描述

**实现细节**：

**文件**：src/xxx.py

**关键代码**：
```python
def function_name():
    # 实现代码
```

**技术栈**：
- 使用的库/框架

**配置项**：
- [Section] → key（说明）

**数据库**（如有）：
```sql
-- 表结构或查询
```

**快捷键**（如有）：
- Ctrl+X - 功能描述

**状态**：✅ 完全实现
```

---

### Bug修复模板

```markdown
**[vX.X.X] Bug修复**：

**问题**：Bug的表现

**原因**：Bug的根本原因

**解决**：
修改的代码：
```python
# 修复后的代码
```

**影响**：修复的范围和影响
```

---

## ✅ 更新检查清单

### 实现新功能后

- [ ] 在 docs/需求实现文档.md 标记 ✅ [vX.X.X]
- [ ] 添加实现细节和代码示例
- [ ] 更新配置项说明（如有）
- [ ] 更新数据库结构（如有）
- [ ] 更新统计数据
- [ ] 提交代码时同时提交文档更新

### 发布新版本前

- [ ] 更新 docs/CHANGELOG.md
- [ ] 更新所有文件的版本号
- [ ] 更新 README.md 的功能列表
- [ ] 更新 src/__init__.py 的版本号
- [ ] 检查所有文档的链接有效性

---

## 🎯 重点文档更新规则

### docs/需求实现文档.md

**更新频率**：每次功能开发后

**必须更新的内容**：
1. 功能状态标记
2. 版本标记
3. 实现代码
4. 配置说明

**可选更新的内容**：
- 技术栈说明
- 使用示例
- 注意事项

**更新示例**：

**添加编辑功能时（v0.2.0）**：
```
之前：
### 2.1.2 编辑任务 ⏳ [v0.2.0]
**状态**：⏳ 计划中

之后：
### 2.1.2 编辑任务 ✅ [v0.2.0]
**需求**：修改任务的所有属性
**实现细节**：
...（完整的实现代码）
**状态**：✅ 完全实现
```

---

### docs/CHANGELOG.md

**更新频率**：每次发布新版本

**格式**：
```markdown
## vX.X.X (YYYY-MM-DD) - 版本名称

### 🎉 新增功能
- ✨ 功能名 - 描述

### 🔧 优化改进
- 🔧 优化名 - 描述

### 🐛 Bug修复
- 🐛 Bug名 - 描述
```

---

## 🔍 文档质量标准

### 好的文档应该

✅ **准确性**
- 代码和文档一致
- 及时更新状态
- 版本标记清晰

✅ **完整性**
- 包含实现细节
- 包含代码示例
- 包含配置说明

✅ **可读性**
- 结构清晰
- 层次分明
- 示例丰富

✅ **可维护性**
- 标记清晰
- 易于查找
- 易于更新

---

## 💡 文档技巧

### 使用状态符号

```markdown
✅ - 已完成
🚧 - 开发中
⏳ - 计划中
❌ - 已取消
⚠️ - 部分完成
```

### 使用版本标记

```markdown
✅ [v0.1.0]              - v0.1.0 实现
✅ [v0.1.0] + 优化 ✅ [v0.2.0]  - v0.2.0 优化
```

### 使用优先级标记

```markdown
🔴 - 高优先级（必须）
🟡 - 中优先级（建议）
🟢 - 低优先级（可选）
💡 - 创新功能（差异化）
```

---

## 📅 文档版本控制

### 文档版本号

**格式**：vX.Y  
- X：主版本（重大更新）
- Y：次版本（小幅更新）

**示例**：
- v1.0 - 初始版本
- v1.1 - 添加新章节
- v2.0 - 重构文档结构

### 更新历史

**记录位置**：每个文档的"18.2 更新历史"章节

**格式**：
```markdown
| 日期 | 版本 | 更新内容 |
|------|------|---------|
| 2025-10-11 | v0.2.0 | 创建文档 |
| 2025-10-15 | v0.3.0 | 添加音效系统 |
```

---

## 🚀 快速开始更新文档

### 最简单的更新流程

1. **打开文档**
   ```
   docs/需求实现文档.md
   ```

2. **找到章节**
   ```
   使用 Ctrl+F 搜索功能名称
   ```

3. **标记状态**
   ```markdown
   ✅ [v0.3.0]
   ```

4. **添加代码**
   ```markdown
   **实现细节**：
   代码...
   ```

5. **保存提交**
   ```bash
   git commit -m "docs: 更新XXX功能实现"
   ```

---

## ⚠️ 常见错误

### ❌ 错误1：忘记更新状态

**错误示例**：
```markdown
# 代码已实现，但文档还标记为 ⏳
### X.X 功能 ⏳ [v0.3.0]
```

**正确做法**：
```markdown
### X.X 功能 ✅ [v0.3.0]
```

---

### ❌ 错误2：版本标记错误

**错误示例**：
```markdown
# 在v0.3.0实现，但标记成v0.2.0
### X.X 功能 ✅ [v0.2.0]
```

**正确做法**：
```markdown
### X.X 功能 ✅ [v0.3.0]
```

---

### ❌ 错误3：缺少实现细节

**错误示例**：
```markdown
### X.X 功能 ✅ [v0.3.0]
**状态**：✅ 已实现
# 没有说明如何实现
```

**正确做法**：
```markdown
### X.X 功能 ✅ [v0.3.0]

**需求**：...

**实现细节**：
文件：src/xxx.py
代码：...

**状态**：✅ 完全实现
```

---

## 📋 更新检查清单

### 每次功能开发后

- [ ] 更新 docs/需求实现文档.md
  - [ ] 标记状态 ✅
  - [ ] 标记版本 [vX.X.X]
  - [ ] 添加实现细节
  - [ ] 添加代码示例
  - [ ] 更新统计数据

- [ ] 记录开发笔记（可选）
  - [ ] 遇到的问题
  - [ ] 解决方案
  - [ ] 经验教训

---

### 每次版本发布前

- [ ] 更新 docs/CHANGELOG.md
  - [ ] 添加版本号和日期
  - [ ] 列出新功能
  - [ ] 列出优化改进
  - [ ] 列出Bug修复

- [ ] 更新版本号
  - [ ] main.py
  - [ ] src/__init__.py
  - [ ] README.md

- [ ] 创建版本报告（可选）
  - [ ] vX.X.X完成总结.md

- [ ] 更新 docs/需求实现文档.md
  - [ ] 版本路线图章节
  - [ ] 实现统计数据

---

## 🎓 最佳实践

### 1. 及时更新
- ✅ 完成功能后立即更新文档
- ✅ 不要等到积累很多功能再更新
- ✅ 保持代码和文档同步

### 2. 详细记录
- ✅ 添加足够的代码示例
- ✅ 说明关键的实现思路
- ✅ 记录重要的配置项

### 3. 保持一致
- ✅ 使用统一的状态符号
- ✅ 使用统一的版本格式
- ✅ 使用统一的文档结构

### 4. 考虑读者
- ✅ 新手能看懂
- ✅ 老手能快速找到细节
- ✅ 提供搜索索引

---

## 📚 文档间的关系

### 核心关系链

```
需求实现文档.md (活文档，详细)
    ↓ 来源于
开发需求文档.md (原始需求)
    ↓ 实现后记录到
CHANGELOG.md (版本日志)
    ↓ 汇总到
项目总览.md (总结)
```

### 更新联动

**实现新功能时**：
1. docs/需求实现文档.md ← 必须更新
2. 代码注释 ← 必须更新
3. docs/CHANGELOG.md ← 发版时更新
4. README.md ← 重要功能时更新

---

## 🔧 工具推荐

### Markdown 编辑器
- **VSCode** + Markdown插件
- **Typora** - 所见即所得
- **MarkText** - 开源编辑器

### 文档管理
- **Git** - 版本控制
- **GitHub** - 在线预览
- **GitBook** - 文档网站

---

## 💡 实用技巧

### 技巧1：使用模板

保存常用的文档模板，新增功能时复制粘贴。

### 技巧2：使用搜索

在 docs 目录中全文搜索，找到相关章节。

### 技巧3：使用索引

docs/README.md 提供了完整的文档索引。

### 技巧4：版本对比

使用 Git diff 比较不同版本的文档变化。

---

## 🎯 目标

通过持续更新文档，实现：

1. **文档即代码**
   - 文档准确反映代码状态
   - 代码实现必有文档记录

2. **可追溯性**
   - 通过文档了解功能演进
   - 通过版本标记追踪历史

3. **易维护性**
   - 新人快速上手
   - 老人快速回忆

4. **高质量**
   - 准确、完整、清晰
   - 有示例、有说明、有索引

---

## 📞 需要帮助？

### 不知道如何写
- 参考现有章节的格式
- 复制相似功能的写法

### 不知道写什么
- 最少要标记状态和版本
- 最好添加实现代码
- 可选添加详细说明

### 文档太长了
- 使用折叠语法（GitHub支持）
- 提供快速索引
- 分章节组织

---

## 🎉 文档即价值

好的文档是项目的重要资产：

- ✅ 降低学习成本
- ✅ 提高开发效率
- ✅ 便于知识传递
- ✅ 展示项目质量

**让我们一起维护好文档！** 📖✨

---

**文档维护者**：项目团队  
**最后更新**：2025-10-11  
**文档版本**：v1.0

