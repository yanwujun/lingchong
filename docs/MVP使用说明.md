# 桌面灵宠 MVP 使用说明

## ✅ 已完成功能

恭喜！桌面灵宠的MVP（最小可用产品）版本已经完成！以下是已实现的功能：

### 1. 宠物窗口 🐱
- ✅ 透明无边框窗口显示
- ✅ 鼠标拖拽移动宠物
- ✅ 点击互动（单击、双击）
- ✅ 右键菜单（待办、设置、隐藏、退出）
- ✅ 自动随机移动
- ✅ 自动随机切换动画
- ✅ 支持PNG图片和GIF动画

### 2. 待办事项管理 📝
- ✅ 添加任务（标题、描述、截止时间、优先级、分类）
- ✅ 查看任务列表
- ✅ 编辑任务（基础功能）
- ✅ 删除任务
- ✅ 标记任务完成
- ✅ 任务筛选（全部、待完成、已完成、已过期）
- ✅ 任务搜索
- ✅ 优先级颜色标识

### 3. 提醒系统 ⏰
- ✅ 定时检查待提醒任务（60秒间隔）
- ✅ 提醒弹窗显示
- ✅ 宠物动画提醒（切换到alert状态）
- ✅ 标记完成
- ✅ 延后提醒（5分钟）
- ✅ 关闭提醒

### 4. 系统托盘 🔧
- ✅ 托盘图标显示
- ✅ 托盘菜单（显示/隐藏宠物、待办事项、设置、退出）
- ✅ 单击托盘显示宠物
- ✅ 双击托盘打开待办
- ✅ 系统通知

### 5. 设置功能 ⚙️
- ✅ 宠物外观设置（皮肤、大小、透明度、动画速度）
- ✅ 行为设置（自动移动、随机动作、频率等）
- ✅ 提醒设置（提醒方式、音量等）
- ✅ 系统设置（自启动、托盘、语言、主题）

### 6. 数据管理 💾
- ✅ SQLite数据库存储
- ✅ 配置文件（config.ini）
- ✅ 数据持久化

---

## 🚀 快速开始

### 1. 检查环境

确保已安装所需依赖：
```bash
pip install -r requirements.txt
```

主要依赖：
- PyQt5 >= 5.15.0
- Pillow >= 10.0.0

### 2. 生成占位图片（如果还没有）

```bash
python generate_placeholder_images.py
```

这将在 `assets/images/default/` 目录下生成测试用的宠物图片。

### 3. 启动应用

```bash
python main.py
```

或者使用测试脚本：
```bash
python test_run.py
```

### 4. 首次启动

启动后你会看到：
1. 控制台显示初始化进度（7个步骤）
2. 桌面上出现一个圆形的宠物图标
3. 系统托盘显示宠物图标
4. 弹出启动通知

---

## 📖 使用教程

### 基本操作

#### 移动宠物
- 用鼠标左键点击并拖动宠物到任意位置

#### 打开菜单
- 右键点击宠物
- 或右键点击系统托盘图标

#### 隐藏/显示宠物
- 通过托盘菜单选择"隐藏宠物"或"显示宠物"
- 单击托盘图标可快速显示宠物

### 管理待办事项

#### 添加任务

1. 右键点击宠物，选择"📝 待办事项"
2. 点击"➕ 添加任务"按钮
3. 填写任务信息：
   - 标题（必填）
   - 描述（可选）
   - 截止日期
   - 优先级（低、中、高）
   - 分类
4. 点击"保存"

#### 查看任务

- 任务列表显示所有任务
- 优先级用颜色标识：
  - 高优先级：红色
  - 中优先级：橙色
  - 低优先级：默认颜色

#### 完成任务

1. 在任务列表中选中任务
2. 点击"✅ 完成"按钮
3. 任务状态变为"已完成"

#### 删除任务

1. 在任务列表中选中任务
2. 点击"🗑️ 删除"按钮
3. 确认删除

#### 筛选任务

使用顶部的筛选下拉框：
- 全部：显示所有任务
- 待完成：只显示未完成的任务
- 已完成：只显示已完成的任务
- 已过期：显示过期的任务

#### 搜索任务

在搜索框中输入关键词，可以搜索任务标题和描述。

### 设置提醒

#### 创建带提醒的任务

1. 添加任务时设置截止日期
2. 系统会在截止时间前15分钟提醒（默认）
3. 提醒方式：
   - 宠物播放提醒动画
   - 弹出提醒窗口
   - 系统托盘通知

#### 处理提醒

当提醒触发时：
- 宠物会切换到"警告"动画
- 弹出提醒窗口显示任务详情
- 可以选择：
  - **标记完成**：完成任务
  - **稍后提醒**：5分钟后再次提醒
  - **关闭**：关闭提醒窗口

### 调整设置

1. 右键点击宠物，选择"⚙️ 设置"
2. 在不同标签页调整设置：
   - **宠物设置**：外观、大小、透明度、动画速度
   - **行为设置**：自动移动、随机动作、动作间隔
   - **提醒设置**：提醒方式、音量、延后时间
   - **系统设置**：自启动、托盘、语言、主题
3. 点击"💾 保存设置"

---

## 🎮 快捷操作

| 操作 | 方法 |
|------|------|
| 移动宠物 | 左键拖动 |
| 互动 | 单击宠物 |
| 打开菜单 | 右键点击宠物或托盘图标 |
| 快速显示宠物 | 单击托盘图标 |
| 打开待办 | 双击托盘图标 或 右键菜单选择 |
| 隐藏宠物 | 右键菜单 → 隐藏宠物 |
| 退出应用 | 右键菜单 → 退出 |

---

## 🔍 测试功能

### 测试提醒系统

想要快速测试提醒功能？

1. 打开待办窗口
2. 添加一个新任务
3. 设置截止时间为**当前时间后1-2分钟**
4. 保存任务
5. 等待1-2分钟
6. 提醒系统会自动触发提醒

**注意**：提醒系统每60秒检查一次，所以可能会有些延迟。

### 测试自动行为

宠物会自动执行以下行为：
- 每10秒随机移动到屏幕上的新位置
- 每10秒随机切换动画（idle、walk、sleep、happy）

可以通过设置调整频率。

---

## 📊 数据存储位置

- **数据库**：`data/tasks.db` - 存储所有待办任务
- **配置文件**：`config.ini` - 应用设置
- **资源文件**：`assets/` - 图片、音效、图标

---

## ⚠️ 注意事项

### 关闭窗口不会退出应用

- 关闭待办窗口或设置窗口时，窗口只会隐藏，应用继续运行
- 要完全退出应用，请使用右键菜单的"退出"选项

### 占位图片

当前使用的是自动生成的占位图片（表情符号）。如果想要更好的视觉效果：

1. 替换 `assets/images/default/` 目录下的图片
2. 使用 GIF 动画或 PNG 图片
3. 推荐尺寸：128x128 或 256x256 像素
4. 必需的图片：
   - `idle.png/gif` - 待机
   - `walk.png/gif` - 行走
   - `happy.png/gif` - 开心
   - `alert.png/gif` - 提醒

### 资源获取

可以从以下网站获取免费的宠物素材：
- [OpenGameArt](https://opengameart.org/)
- [itch.io](https://itch.io/game-assets/free)
- [Kenney.nl](https://kenney.nl/)

或参考这些优秀项目：
- [DyberPet](https://github.com/ChaozhongLiu/DyberPet)
- [Pet-GPT](https://github.com/Hanzoe/Pet-GPT)

---

## 🐛 常见问题

### Q: 宠物不显示？

**A**: 检查以下几点：
1. 确认程序已启动（查看控制台输出或托盘图标）
2. 尝试通过托盘图标显示宠物
3. 检查资源文件是否存在：`assets/images/default/idle.png`

### Q: 无法添加任务？

**A**: 
1. 确认任务标题不为空
2. 检查数据库文件：`data/tasks.db` 是否可写
3. 查看控制台错误信息

### Q: 提醒不工作？

**A**:
1. 确认任务设置了截止时间
2. 提醒系统每60秒检查一次
3. 查看控制台输出，确认提醒系统已启动

### Q: 宠物移动太快/太慢？

**A**: 
1. 打开设置窗口
2. 在"行为设置"中调整"动作间隔"
3. 保存设置

### Q: 如何更换宠物皮肤？

**A**:
1. 将新的图片放到 `assets/images/新皮肤名称/` 目录
2. 在设置中选择新皮肤（功能开发中）
3. 或修改 `config.ini` 中的 `skin` 参数

---

## 🎉 功能演示

### 典型使用场景

**场景1：添加工作任务**
```
1. 右键宠物 → 待办事项
2. 添加任务："完成项目报告"
3. 设置截止时间：今天18:00
4. 优先级：高
5. 保存
6. 系统会在17:45提醒你
```

**场景2：日常陪伴**
```
1. 启动应用，宠物在桌面显示
2. 宠物每10秒自动移动
3. 随机切换不同表情和动作
4. 工作时提供轻松的陪伴
```

**场景3：任务管理**
```
1. 打开待办窗口查看今日任务
2. 完成一个任务，点击"完成"按钮
3. 宠物显示开心动画
4. 系统托盘显示通知
```

---

## 📈 下一步计划

MVP版本已经实现了核心功能，后续可以：

### 近期计划
- [ ] 完善编辑任务功能
- [ ] 实现搜索功能
- [ ] 添加音效支持
- [ ] 优化动画过渡效果
- [ ] 添加更多宠物皮肤

### 中期计划
- [ ] 宠物成长系统
- [ ] 数据云同步
- [ ] 多宠物支持
- [ ] 番茄钟功能
- [ ] 天气显示

### 长期计划
- [ ] AI智能对话（集成ChatGPT）
- [ ] 语音交互
- [ ] 社区分享（皮肤、动画）
- [ ] 移动端支持

---

## 🤝 反馈与贡献

如果你在使用过程中遇到问题或有建议：

1. 查看控制台输出的错误信息
2. 查看 `data/tasks.db` 数据库文件
3. 检查 `config.ini` 配置文件
4. 参考 `快速开始指南.md`

---

## 🎊 恭喜！

恭喜完成桌面灵宠MVP版本！现在你拥有了一个：
- ✅ 可爱的桌面宠物
- ✅ 实用的待办管理工具
- ✅ 智能的提醒系统
- ✅ 完整的数据持久化

**开始享受你的桌面灵宠吧！** 🐱💖

---

*如有任何问题，请参考项目根目录下的其他文档：*
- `README.md` - 项目说明
- `开发需求文档.md` - 详细需求
- `快速开始指南.md` - 开发指南

