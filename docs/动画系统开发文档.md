# ğŸ› ï¸ æ¡Œé¢å® ç‰©åŠ¨ç”»ç³»ç»Ÿå¼€å‘æ–‡æ¡£

## ğŸ“˜ æ–‡æ¡£æ¦‚è¿°

æœ¬æ–‡æ¡£é¢å‘å¼€å‘è€…ï¼Œè¯¦ç»†ä»‹ç»æ¡Œé¢å® ç‰©åŠ¨ç”»ç³»ç»Ÿçš„æ¶æ„è®¾è®¡ã€æ ¸å¿ƒAPIã€æ‰©å±•æ–¹æ³•å’Œæœ€ä½³å®è·µã€‚

**ç‰ˆæœ¬**: v0.4.1  
**æ›´æ–°æ—¥æœŸ**: 2025-10-13  
**ç›®æ ‡è¯»è€…**: å¼€å‘è€…ã€è´¡çŒ®è€…ã€ç³»ç»Ÿé›†æˆè€…

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         PetWindow (UIå±‚)              â”‚
â”‚  - çª—å£ç®¡ç†                            â”‚
â”‚  - ç”¨æˆ·äº¤äº’                            â”‚
â”‚  - äº‹ä»¶å¤„ç†                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      åŠ¨ç”»ç®¡ç†å±‚                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ load_animation()             â”‚     â”‚
â”‚  â”‚ - ç¼“å­˜æŸ¥æ‰¾                    â”‚     â”‚
â”‚  â”‚ - GIF/PNGåŠ è½½                â”‚     â”‚
â”‚  â”‚ - é™çº§å¤„ç†                    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ åŠ¨ç”»ç¼“å­˜ (animation_cache)   â”‚     â”‚
â”‚  â”‚ {name: {type, movie/pixmap}} â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      é…ç½®ç®¡ç†å±‚                        â”‚
â”‚  - animation_config                   â”‚
â”‚  - config.ini [Animation]             â”‚
â”‚  - åŠ¨ç”»é€Ÿåº¦/å¯ç”¨çŠ¶æ€                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      èµ„æºå±‚                            â”‚
â”‚  assets/images/default/               â”‚
â”‚  - *.gif (åŠ¨ç”»æ–‡ä»¶)                   â”‚
â”‚  - *.png (åå¤‡å›¾ç‰‡)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒç»„ä»¶

#### 1. PetWindow (src/pet_window.py)
- **èŒè´£**: çª—å£æ˜¾ç¤ºã€ç”¨æˆ·äº¤äº’ã€åŠ¨ç”»æ’­æ”¾
- **å…³é”®å±æ€§**:
  - `animation_states`: åŠ¨ç”»åˆ—è¡¨
  - `animation_cache`: åŠ¨ç”»ç¼“å­˜
  - `current_animation`: å½“å‰åŠ¨ç”»
  - `movie`: QMovieå¯¹è±¡

#### 2. AnimationConfig
- **èŒè´£**: åŠ¨ç”»é…ç½®ç®¡ç†
- **é…ç½®é¡¹**: é€Ÿåº¦ã€å¯ç”¨çŠ¶æ€ã€æŒç»­æ—¶é—´

#### 3. AnimationCache
- **èŒè´£**: é¢„åŠ è½½å’Œç¼“å­˜åŠ¨ç”»èµ„æº
- **ç»“æ„**: `{name: {type: 'gif'|'png', movie|pixmap}}`

---

## ğŸ”§ æ ¸å¿ƒAPI

### åŠ¨ç”»åŠ è½½

#### load_animation(animation_name: str) â†’ bool

åŠ è½½å¹¶æ’­æ”¾æŒ‡å®šåŠ¨ç”»ã€‚

**å‚æ•°**:
- `animation_name` (str): åŠ¨ç”»åç§°ï¼Œå¦‚ 'idle', 'walk'

**è¿”å›**:
- bool: åŠ è½½æˆåŠŸè¿”å›Trueï¼Œå¤±è´¥è¿”å›False

**ç¤ºä¾‹**:
```python
# åŠ è½½è¡Œèµ°åŠ¨ç”»
success = pet_window.load_animation("walk")

if not success:
    print("åŠ¨ç”»åŠ è½½å¤±è´¥")
```

**æµç¨‹**:
1. æ£€æŸ¥åŠ¨ç”»æ˜¯å¦å¯ç”¨
2. æŸ¥æ‰¾ç¼“å­˜
3. ç¼“å­˜å‘½ä¸­ â†’ ç›´æ¥ä½¿ç”¨
4. ç¼“å­˜æœªå‘½ä¸­ â†’ å°è¯•åŠ è½½æ–‡ä»¶
5. æ–‡ä»¶ä¸å­˜åœ¨ â†’ é™çº§æ–¹æ¡ˆ

**é™çº§æ–¹æ¡ˆ**:
```python
Level 1: ä½¿ç”¨ç¼“å­˜ï¼ˆæœ€å¿«ï¼‰
Level 2: ç›´æ¥åŠ è½½æ–‡ä»¶
Level 3A: ä½¿ç”¨idleåŠ¨ç”»
Level 3B: æ˜¾ç¤ºEmojiæ–‡å­—
```

### åŠ¨ç”»æ§åˆ¶

#### pause_animation() â†’ bool

æš‚åœå½“å‰åŠ¨ç”»ã€‚

**ç¤ºä¾‹**:
```python
if pet_window.pause_animation():
    print("åŠ¨ç”»å·²æš‚åœ")
```

#### resume_animation() â†’ bool

æ¢å¤åŠ¨ç”»æ’­æ”¾ã€‚

**ç¤ºä¾‹**:
```python
if pet_window.resume_animation():
    print("åŠ¨ç”»å·²æ¢å¤")
```

### åŠ¨ç”»é¢„åŠ è½½

#### _preload_animations() â†’ None

å¯åŠ¨æ—¶é¢„åŠ è½½æ‰€æœ‰åŠ¨ç”»åˆ°ç¼“å­˜ã€‚

**å†…éƒ¨å®ç°**:
```python
def _preload_animations(self):
    for animation_name in self.animation_states:
        gif_path = get_resource_path(f"assets/images/default/{animation_name}.gif")
        if os.path.exists(gif_path):
            movie = QMovie(gif_path)
            self.animation_cache[animation_name] = {
                'type': 'gif',
                'movie': movie
            }
```

### èµ„æºæ¸…ç†

#### cleanup() â†’ None

æ¸…ç†æ‰€æœ‰èµ„æºï¼ŒåŒ…æ‹¬å®šæ—¶å™¨ã€åŠ¨ç”»å¯¹è±¡ã€‚

**è°ƒç”¨æ—¶æœº**:
- åº”ç”¨é€€å‡ºæ—¶
- çª—å£å…³é—­æ—¶

**ç¤ºä¾‹**:
```python
pet_window.cleanup()
```

---

## ğŸ“¦ æ•°æ®ç»“æ„

### AnimationCache ç»“æ„

```python
animation_cache = {
    'idle': {
        'type': 'gif',
        'path': '/path/to/idle.gif',
        'movie': QMovieå¯¹è±¡
    },
    'walk': {
        'type': 'png',
        'pixmap': QPixmapå¯¹è±¡
    },
    ...
}
```

### AnimationConfig ç»“æ„

```python
animation_config = {
    'enable_animation': True,
    'animation_speed': 1.0,
    'enable_random_action': True,
    'enable_auto_move': True,
    'durations': {
        'idle': 200,
        'walk': 150,
        'happy': 100,
        'sleep': 800,
        'alert': 120
    }
}
```

---

## ğŸ¨ æ·»åŠ æ–°åŠ¨ç”»

### æ­¥éª¤1: åˆ›å»ºGIFæ–‡ä»¶

```python
from PIL import Image

frames = []
# åˆ›å»ºåŠ¨ç”»å¸§
for i in range(frame_count):
    frame = create_frame(i)  # ä½ çš„ç»˜åˆ¶é€»è¾‘
    frames.append(frame)

# ä¿å­˜ä¸ºGIF
frames[0].save(
    'new_animation.gif',
    save_all=True,
    append_images=frames[1:],
    duration=200,  # æ¯«ç§’/å¸§
    loop=0
)
```

### æ­¥éª¤2: æ·»åŠ åˆ°åŠ¨ç”»åˆ—è¡¨

```python
# src/pet_window.py
self.animation_states = [
    "idle", "walk", "sleep", "happy", "alert",
    "eat", "stretch", "excited", "sad",
    "new_animation"  # æ·»åŠ æ–°åŠ¨ç”»
]
```

### æ­¥éª¤3: é…ç½®æŒç»­æ—¶é—´

```ini
# config.ini
[Animation]
new_animation_duration = 150
```

### æ­¥éª¤4: æ·»åŠ è§¦å‘é€»è¾‘

```python
# åœ¨é€‚å½“çš„åœ°æ–¹è§¦å‘
def on_custom_event(self):
    self.pet_window.load_animation("new_animation")
    QTimer.singleShot(2000, lambda: self.pet_window.load_animation("idle"))
```

---

## ğŸ”Œ æ‰©å±•åŠ¨ç”»ç³»ç»Ÿ

### è‡ªå®šä¹‰çš®è‚¤æ”¯æŒ

#### ç›®å½•ç»“æ„
```
assets/images/
â”œâ”€â”€ default/        # é»˜è®¤çš®è‚¤
â”‚   â”œâ”€â”€ idle.gif
â”‚   â”œâ”€â”€ walk.gif
â”‚   â””â”€â”€ ...
â”œâ”€â”€ custom_skin/    # è‡ªå®šä¹‰çš®è‚¤
â”‚   â”œâ”€â”€ idle.gif
â”‚   â”œâ”€â”€ walk.gif
â”‚   â””â”€â”€ ...
```

#### å®ç°ä»£ç 

```python
def load_animation_from_skin(self, animation_name, skin_name="default"):
    """
    ä»æŒ‡å®šçš®è‚¤åŠ è½½åŠ¨ç”»
    
    Args:
        animation_name: åŠ¨ç”»åç§°
        skin_name: çš®è‚¤åç§°
    """
    gif_path = get_resource_path(
        f"assets/images/{skin_name}/{animation_name}.gif"
    )
    
    if os.path.exists(gif_path):
        # åŠ è½½é€»è¾‘
        ...
    else:
        # é™çº§åˆ°defaultçš®è‚¤
        return self.load_animation_from_skin(animation_name, "default")
```

### åŠ¨ç”»çŠ¶æ€æœº

#### çŠ¶æ€è½¬æ¢è§„åˆ™

```python
class AnimationStateMachine:
    """åŠ¨ç”»çŠ¶æ€æœº"""
    
    def __init__(self):
        self.transitions = {
            'idle': ['walk', 'sleep', 'happy', 'alert', 'eat', 'stretch'],
            'walk': ['idle'],
            'happy': ['idle'],
            'sleep': ['idle', 'stretch'],
            # ...
        }
        
        self.priorities = {
            'alert': 100,    # æœ€é«˜ä¼˜å…ˆçº§
            'excited': 90,
            'happy': 80,
            'walk': 70,
            'idle': 10       # æœ€ä½ä¼˜å…ˆçº§
        }
    
    def can_transition(self, from_state, to_state):
        """æ£€æŸ¥æ˜¯å¦å¯ä»¥è½¬æ¢"""
        return to_state in self.transitions.get(from_state, [])
    
    def should_interrupt(self, current_state, new_state):
        """æ£€æŸ¥æ˜¯å¦åº”è¯¥ä¸­æ–­å½“å‰åŠ¨ç”»"""
        current_priority = self.priorities.get(current_state, 50)
        new_priority = self.priorities.get(new_state, 50)
        return new_priority > current_priority
```

### åŠ¨ç”»äº‹ä»¶ç³»ç»Ÿ

```python
from PyQt5.QtCore import pyqtSignal

class PetWindow(QWidget):
    # åŠ¨ç”»ä¿¡å·
    animation_started = pyqtSignal(str)  # åŠ¨ç”»åç§°
    animation_finished = pyqtSignal(str)
    animation_failed = pyqtSignal(str, str)  # åç§°, é”™è¯¯ä¿¡æ¯
    
    def load_animation(self, animation_name):
        # å‘å°„å¼€å§‹ä¿¡å·
        self.animation_started.emit(animation_name)
        
        try:
            # åŠ è½½é€»è¾‘
            ...
        except Exception as e:
            self.animation_failed.emit(animation_name, str(e))
        
        # å‘å°„å®Œæˆä¿¡å·
        self.animation_finished.emit(animation_name)

# ä½¿ç”¨
pet_window.animation_started.connect(lambda name: print(f"å¼€å§‹: {name}"))
pet_window.animation_finished.connect(lambda name: print(f"å®Œæˆ: {name}"))
```

---

## ğŸ§ª æµ‹è¯•æŒ‡å—

### å•å…ƒæµ‹è¯•

```python
import unittest
from src.pet_window import PetWindow

class TestAnimation(unittest.TestCase):
    def setUp(self):
        self.pet = PetWindow()
    
    def test_load_animation(self):
        """æµ‹è¯•åŠ¨ç”»åŠ è½½"""
        result = self.pet.load_animation("idle")
        self.assertTrue(result)
        self.assertEqual(self.pet.current_animation, "idle")
    
    def test_animation_cache(self):
        """æµ‹è¯•åŠ¨ç”»ç¼“å­˜"""
        self.assertIn("idle", self.pet.animation_cache)
        cached = self.pet.animation_cache["idle"]
        self.assertIn("type", cached)
    
    def tearDown(self):
        self.pet.cleanup()
```

### æ€§èƒ½æµ‹è¯•

```python
import time

def benchmark_animation_loading():
    """æ€§èƒ½åŸºå‡†æµ‹è¯•"""
    pet = PetWindow()
    
    # æµ‹è¯•åˆ‡æ¢é€Ÿåº¦
    start = time.time()
    for _ in range(100):
        pet.load_animation("walk")
        pet.load_animation("idle")
    elapsed = time.time() - start
    
    avg = elapsed / 200 * 1000  # æ¯«ç§’
    print(f"å¹³å‡åˆ‡æ¢æ—¶é—´: {avg:.2f}ms")
    
    assert avg < 10, f"åˆ‡æ¢å¤ªæ…¢: {avg}ms"
    
    pet.cleanup()
```

---

## ğŸ“ æœ€ä½³å®è·µ

### 1. åŠ¨ç”»å‘½åè§„èŒƒ

```python
# å¥½çš„å‘½å
'idle', 'walk', 'sleep', 'happy'

# é¿å…
'anim1', 'test', 'xxx'
```

### 2. èµ„æºç®¡ç†

```python
# æ€»æ˜¯æ¸…ç†èµ„æº
try:
    pet_window.load_animation("custom")
finally:
    pet_window.cleanup()

# ä½¿ç”¨withè¯­å¥ï¼ˆå¦‚æœå®ç°äº†ä¸Šä¸‹æ–‡ç®¡ç†å™¨ï¼‰
with PetWindow() as pet:
    pet.load_animation("idle")
```

### 3. é”™è¯¯å¤„ç†

```python
# æ•è·ç‰¹å®šå¼‚å¸¸
try:
    result = pet.load_animation("new_anim")
    if not result:
        # å¤„ç†åŠ è½½å¤±è´¥
        logger.warning(f"åŠ¨ç”»åŠ è½½å¤±è´¥: new_anim")
except Exception as e:
    logger.error(f"åŠ¨ç”»ç³»ç»Ÿé”™è¯¯: {e}")
    # é™çº§æ–¹æ¡ˆ
    pet.load_animation("idle")
```

### 4. æ€§èƒ½ä¼˜åŒ–

```python
# 1. ä½¿ç”¨ç¼“å­˜ï¼ˆå·²é»˜è®¤å¯ç”¨ï¼‰
# 2. æ‰¹é‡åŠ è½½
animations_to_load = ['walk', 'happy', 'alert']
for anim in animations_to_load:
    pet.load_animation(anim)

# 3. å»¶è¿ŸåŠ è½½éå…³é”®åŠ¨ç”»
QTimer.singleShot(1000, lambda: pet.load_animation("rare_animation"))
```

---

## ğŸ” è°ƒè¯•æŠ€å·§

### å¯ç”¨è¯¦ç»†æ—¥å¿—

```python
# åœ¨ pet_window.py é¡¶éƒ¨æ·»åŠ 
import logging
logging.basicConfig(level=logging.DEBUG)
```

### åŠ¨ç”»çŠ¶æ€æ£€æŸ¥

```python
# æ£€æŸ¥å½“å‰çŠ¶æ€
print(f"å½“å‰åŠ¨ç”»: {pet.current_animation}")
print(f"ç¼“å­˜å¤§å°: {len(pet.animation_cache)}")
print(f"æ˜¯å¦æš‚åœ: {pet.animation_paused}")

# æ£€æŸ¥é…ç½®
print(f"åŠ¨ç”»é…ç½®: {pet.animation_config}")
```

### æ€§èƒ½åˆ†æ

```python
import cProfile

def profile_animation():
    profiler = cProfile.Profile()
    profiler.enable()
    
    # æ‰§è¡ŒåŠ¨ç”»æ“ä½œ
    for _ in range(100):
        pet.load_animation("walk")
    
    profiler.disable()
    profiler.print_stats(sort='cumtime')
```

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### ç›®æ ‡æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡å€¼ | å½“å‰å€¼ | çŠ¶æ€ |
|------|--------|--------|------|
| å¯åŠ¨åŠ è½½æ—¶é—´ | < 300ms | ~200ms | âœ… |
| åŠ¨ç”»åˆ‡æ¢æ—¶é—´ | < 10ms | ~5ms | âœ… |
| å†…å­˜å ç”¨ | < 100MB | ~60MB | âœ… |
| CPUå ç”¨(idle) | < 2% | ~1% | âœ… |
| CPUå ç”¨(active) | < 5% | ~2.5% | âœ… |

### æ€§èƒ½ç›‘æ§ä»£ç 

```python
import psutil
import os

def monitor_performance():
    """ç›‘æ§æ€§èƒ½æŒ‡æ ‡"""
    process = psutil.Process(os.getpid())
    
    # CPUå ç”¨
    cpu_percent = process.cpu_percent(interval=1.0)
    
    # å†…å­˜å ç”¨
    memory_info = process.memory_info()
    memory_mb = memory_info.rss / 1024 / 1024
    
    print(f"CPU: {cpu_percent}%")
    print(f"å†…å­˜: {memory_mb:.2f}MB")
```

---

## ğŸš€ é«˜çº§ä¸»é¢˜

### 1. å¤šçº¿ç¨‹åŠ¨ç”»åŠ è½½

```python
from PyQt5.QtCore import QThread, pyqtSignal

class AnimationLoader(QThread):
    """åå°åŠ è½½åŠ¨ç”»"""
    loaded = pyqtSignal(str, dict)  # åç§°, ç¼“å­˜æ•°æ®
    
    def __init__(self, animations):
        super().__init__()
        self.animations = animations
    
    def run(self):
        for name in self.animations:
            # åŠ è½½é€»è¾‘
            cache_data = self._load(name)
            self.loaded.emit(name, cache_data)
```

### 2. åŠ¨ç”»æ’å€¼

```python
def interpolate_animation(from_anim, to_anim, progress):
    """
    åœ¨ä¸¤ä¸ªåŠ¨ç”»ä¹‹é—´æ’å€¼
    
    Args:
        from_anim: èµ·å§‹åŠ¨ç”»
        to_anim: ç›®æ ‡åŠ¨ç”»
        progress: è¿›åº¦ (0.0-1.0)
    """
    # å®ç°æ¸å˜æ•ˆæœ
    opacity = 1.0 - progress
    pet_window.setWindowOpacity(opacity)
```

### 3. è‡ªå®šä¹‰åŠ¨ç”»åºåˆ—

```python
class AnimationSequence:
    """åŠ¨ç”»åºåˆ—æ’­æ”¾å™¨"""
    
    def __init__(self, pet_window):
        self.pet = pet_window
        self.sequence = []
        self.current = 0
    
    def add(self, animation_name, duration_ms):
        """æ·»åŠ åŠ¨ç”»åˆ°åºåˆ—"""
        self.sequence.append((animation_name, duration_ms))
    
    def play(self):
        """æ’­æ”¾åºåˆ—"""
        if self.current < len(self.sequence):
            name, duration = self.sequence[self.current]
            self.pet.load_animation(name)
            QTimer.singleShot(duration, self.play_next)
    
    def play_next(self):
        """æ’­æ”¾ä¸‹ä¸€ä¸ª"""
        self.current += 1
        self.play()

# ä½¿ç”¨
seq = AnimationSequence(pet_window)
seq.add("happy", 1000)
seq.add("excited", 2000)
seq.add("idle", 0)
seq.play()
```

---

## ğŸ“š å‚è€ƒèµ„æº

### ç›¸å…³æ–‡æ¡£
- [ç”¨æˆ·ä½¿ç”¨æ–‡æ¡£](å® ç‰©åŠ¨ç”»è¯´æ˜.md)
- [å®Œå–„æŠ¥å‘Š](../å® ç‰©åŠ¨ç”»ç³»ç»Ÿå®Œå–„æŠ¥å‘Š.md)
- [æµ‹è¯•æ–‡æ¡£](../tests/test_pet_animation.py)

### å¤–éƒ¨èµ„æº
- PyQt5æ–‡æ¡£: https://doc.qt.io/qt-5/
- PIL/Pillowæ–‡æ¡£: https://pillow.readthedocs.io/
- GIFè§„èŒƒ: https://www.w3.org/Graphics/GIF/spec-gif89a.txt

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

### æäº¤æ–°åŠ¨ç”»

1. åˆ›å»ºGIFæ–‡ä»¶ï¼ˆ128x128ï¼Œé€æ˜èƒŒæ™¯ï¼‰
2. æ·»åŠ åˆ° `assets/images/default/`
3. æ›´æ–° `animation_states` åˆ—è¡¨
4. ç¼–å†™æµ‹è¯•ç”¨ä¾‹
5. æ›´æ–°æ–‡æ¡£

### ä»£ç è§„èŒƒ

```python
# å‡½æ•°å‘½åï¼šå°å†™ä¸‹åˆ’çº¿
def load_animation(self, name):
    pass

# ç±»å‘½åï¼šå¤§é©¼å³°
class AnimationManager:
    pass

# å¸¸é‡ï¼šå¤§å†™ä¸‹åˆ’çº¿
MAX_ANIMATION_DURATION = 5000

# æ³¨é‡Šï¼šæ¸…æ™°æè¿°æ„å›¾
# åŠ è½½åŠ¨ç”»å¹¶åº”ç”¨é€Ÿåº¦é…ç½®
```

---

## â“ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•æé«˜åŠ¨ç”»åˆ‡æ¢é€Ÿåº¦ï¼Ÿ
A: ä½¿ç”¨é¢„åŠ è½½å’Œç¼“å­˜æœºåˆ¶ï¼ˆå·²é»˜è®¤å¯ç”¨ï¼‰

### Q: å¦‚ä½•æ·»åŠ è‡ªå®šä¹‰åŠ¨ç”»ï¼Ÿ
A: å‚è€ƒ"æ·»åŠ æ–°åŠ¨ç”»"ç« èŠ‚

### Q: åŠ¨ç”»ä¸æ˜¾ç¤ºæ€ä¹ˆåŠï¼Ÿ
A: æ£€æŸ¥é…ç½®æ–‡ä»¶ã€æ–‡ä»¶è·¯å¾„ã€æ§åˆ¶å°æ—¥å¿—

### Q: å¦‚ä½•é™ä½CPUå ç”¨ï¼Ÿ
A: è°ƒæ•´ `animation_speed`ï¼Œå…³é—­ `auto_move`

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

**é—®é¢˜åé¦ˆ**: GitHub Issues  
**å¼€å‘äº¤æµ**: å¼€å‘è€…è®ºå›  
**ä»£ç å®¡æŸ¥**: Pull Request

---

**ğŸ“– æ–‡æ¡£ç‰ˆæœ¬**: v0.4.1  
**æœ€åæ›´æ–°**: 2025-10-13  
**ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ

---

**ğŸ“ Happy Coding!** ğŸš€

